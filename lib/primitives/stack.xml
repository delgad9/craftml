<craft>
    <group>
        <content></content>
    </group>
    <script type="text/craftml">

        function main(params, scope){

            var contentSolids = scope.solids[0].children

            var tz = 0
            contentSolids.reverse().forEach(function(solid){

                solid.layout.location.z = tz
                tz = tz + solid.layout.size.z

                // center along y
                solid.layout.location.y = - solid.layout.size.y / 2

                // center along x
                solid.layout.location.x = - solid.layout.size.x / 2

            })

            var ymin = _.min(contentSolids.map(function(c) {
                return c.layout.location.y
            }))

            var xmin = _.min(contentSolids.map(function(c) {
                return c.layout.location.x
            }))            

            contentSolids.forEach(function(solid){
                solid.layout.location.y = solid.layout.location.y - ymin
                solid.layout.location.x = solid.layout.location.x - xmin
            })

            scope.solids[0].fitToChildren()
        }

    </script>
</craft>